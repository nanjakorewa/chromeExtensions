<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>コンテンツ非表示ツール</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#f7f9fc; --card:#fff; --muted:#5b6b83; --text:#0f172a;
      --accent:#2563eb; --accent-2:#16a34a; --warn:#dc2626; --ring:#3b82f633;
      --border:#e5e7eb; --chip:#eef2ff; --shadow:0 10px 24px rgba(15,23,42,.06);
      color-scheme: light;
    }
    *{ box-sizing:border-box } html,body{ height:100% }
    body{
      margin:0; font:14px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans JP",Meiryo,sans-serif;
      background:
        radial-gradient(1200px 600px at 20% -10%, #e8f0ff 0, transparent 60%),
        radial-gradient(1000px 500px at 100% 0, #f1f5ff 0, transparent 60%),
        var(--bg);
      color:var(--text); padding:24px;
    }
    .container{ max-width: 880px; margin: 0 auto; }
    .header{
      position:sticky; top:0; z-index:5; margin:-24px -24px 24px; padding:16px 24px; backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65)); border-bottom:1px solid var(--border);
    }
    .title{ display:flex; gap:12px; align-items:center; font-weight:700; letter-spacing:.2px; }
    .badge{ padding:2px 8px; border-radius:999px; font-size:12px; background:#eef2ff; color:#374151; border:1px solid var(--border); }

    .card{ background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow); }
    .card > .card-hd{ display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid var(--border); }
    .card > .card-bd{ padding:16px 18px 18px; }
    .sub{ color:var(--muted); font-size:12px; margin-top:4px; }

    .switch{ position:relative; display:inline-flex; align-items:center; gap:10px; cursor:pointer; user-select:none; }
    .switch input{ display:none; }
    .track{ width:48px; height:28px; border-radius:999px; background:#e5e7eb; border:1px solid var(--border);
      position:relative; transition:.2s ease; box-shadow: inset 0 2px 6px rgba(15,23,42,.06); }
    .thumb{ position:absolute; top:50%; left:3px; transform:translateY(-50%); width:22px; height:22px; border-radius:50%;
      background:linear-gradient(180deg,#fff,#f3f4f6); box-shadow:0 2px 8px rgba(15,23,42,.15); transition:left .2s ease, background .2s ease; }
    .switch input:checked + .track{ background: linear-gradient(90deg,#4f46e5,#22c55e); border-color:transparent; box-shadow:0 0 0 6px var(--ring); }
    .switch input:checked + .track .thumb{ left:23px; background:linear-gradient(180deg,#fff,#eef2ff); }

    .row{ display:flex; gap:14px; align-items:center; flex-wrap:wrap; margin:10px 0 4px; }
    .kbd{ font:12px/1 Menlo,Consolas,ui-monospace; background:#f3f4f6; border:1px solid var(--border); padding:3px 6px; border-radius:6px; color:#334155; }

    textarea{
      width:100%; min-height:220px; resize:vertical;
      background:#fff; color:var(--text); border:1px solid var(--border);
      border-radius:12px; padding:12px 14px; line-height:1.6; outline:none; transition:border .2s, box-shadow .2s;
    }
    textarea:focus{ border-color:var(--accent); box-shadow:0 0 0 6px var(--ring); }

    .toolbar{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .btn{
      appearance:none; cursor:pointer; border-radius:10px; padding:10px 14px; border:1px solid var(--border);
      background:linear-gradient(180deg,#fff,#f8fafc); color:#111827; transition:.15s; font-weight:600;
      box-shadow:0 6px 14px rgba(15,23,42,.08);
    }
    .btn:hover{ transform: translateY(-1px); } .btn:active{ transform: translateY(0); }
    .btn.save{ background:linear-gradient(180deg,#2563eb,#1d4ed8); border-color:transparent; color:#fff; }
    .hint{ color:var(--muted); font-size:12px; }
    .counter{ color:#334155; font-size:12px; margin-left:auto; }
    .row.space{ justify-content: space-between; gap:8px; }

    .toast{
      position:fixed; right:20px; bottom:20px; padding:10px 14px; border-radius:10px;
      background:#fff; border:1px solid var(--border); color:#1f2937; box-shadow:var(--shadow);
      opacity:0; transform:translateY(10px); transition:.25s;
    }
    .toast.show{ opacity:1; transform:translateY(0); }
  </style>
</head>
<body>
  <div class="header">
    <div class="title">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M5 12h14" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
        <rect x="3" y="4" width="8" height="6" rx="2" fill="#2563eb" opacity=".9"/>
        <rect x="13" y="14" width="8" height="6" rx="2" fill="#16a34a" opacity=".9"/>
      </svg>
      <div>コンテンツ非表示ツール</div>
      <span class="badge">v1.7 (Light)</span>
    </div>
  </div>

  <div class="container">
    <section class="card">
      <div class="card-hd">
        <div>
          <div style="font-weight:700">フィルタ設定</div>
          <div class="sub">プリセットはテキストエリアに表示されず、実行時に内部合成されます</div>
        </div>
      </div>
      <div class="card-bd">
        <!-- いいね/RT 比率 -->
        <div class="row">
          <label class="switch" title="いいね数がRT数の100倍以上のツイートを自動で非表示（RT=0は1扱い）">
            <input id="hideHighLikeRatio" type="checkbox" />
            <div class="track"><div class="thumb"></div></div>
            <div>センシティブな漫画・画像の可能性がある投稿を非表示</div>
          </label>
        </div>

        <hr style="border:none;border-top:1px solid var(--border); margin:12px 0" />

        <div class="row">
          <label class="switch"><input id="usePresetAbusive" type="checkbox" />
            <div class="track"><div class="thumb"></div></div><div>暴言／ネガティブ投稿を非表示</div></label>
        </div>
        <div class="row">
          <label class="switch"><input id="usePresetSensitive" type="checkbox" />
            <div class="track"><div class="thumb"></div></div><div>センシティブな投稿を非表示</div></label>
        </div>

        <hr style="border:none;border-top:1px solid var(--border); margin:12px 0" />

        <div class="row">
          <label class="switch"><input id="wholeWord" type="checkbox" />
            <div class="track"><div class="thumb"></div></div><div>単語全体にのみ一致</div></label>
          <label class="switch"><input id="useRegex" type="checkbox" />
            <div class="track"><div class="thumb"></div></div><div>正規表現をつかう</div></label>
          <label class="switch"><input id="matchHashtags" type="checkbox" />
            <div class="track"><div class="thumb"></div></div><div>ハッシュタグも対象</div></label>
          <label class="switch"><input id="dryRun" type="checkbox" />
            <div class="track"><div class="thumb"></div></div><div>非表示にする投稿をプレビューする</div></label>
          <span class="counter"><span id="kwCount">0</span> 行</span>
        </div>

        <textarea id="keywords" placeholder="1行に1つ。例:
spoiler
ネタバレ
/geo(guess|guesser)/i  ← 正規表現をつかう場合の入力例
# 先頭が # の行と空行は無視されます"></textarea>

        <div class="hint" style="margin-top:6px">
          入力例のように <span class="kbd">/pattern/flags</span> 形式はそのまま正規表現として扱われます（ユーザー定義のみ）。<br />
          プリセットは表示されませんが、ON の間は自動的に合成されます。
        </div>

        <div class="row toolbar" style="margin-top:14px">
          <button id="save" class="btn save">保存</button>
          <span id="status" class="hint"></span>
        </div>
      </div>
    </section>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite">Saved.</div>
  <script src="options.js"></script>
</body>
</html>
